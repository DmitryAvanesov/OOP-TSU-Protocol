--
-- Script was generated by Devart dbForge Studio 2019 for MySQL, Version 8.2.23.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 13.12.2019 7:56:03
-- Server version: 8.0.17
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

--
-- Set default database
--
USE `tsu-oop-protocol-db`;

--
-- Drop table `event`
--
DROP TABLE IF EXISTS event;

--
-- Drop table `game`
--
DROP TABLE IF EXISTS game;

--
-- Drop table `player`
--
DROP TABLE IF EXISTS player;

--
-- Drop table `tournament_team`
--
DROP TABLE IF EXISTS tournament_team;

--
-- Drop table `team`
--
DROP TABLE IF EXISTS team;

--
-- Drop table `tournament`
--
DROP TABLE IF EXISTS tournament;

--
-- Drop table `sport`
--
DROP TABLE IF EXISTS sport;

--
-- Set default database
--
USE `tsu-oop-protocol-db`;

--
-- Create table `sport`
--
CREATE TABLE sport (
  sport_ID INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  name VARCHAR(45) NOT NULL,
  PRIMARY KEY (sport_ID)
)
ENGINE = INNODB,
AUTO_INCREMENT = 2,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create table `tournament`
--
CREATE TABLE tournament (
  tournament_ID INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  sport INT(10) UNSIGNED NOT NULL,
  title VARCHAR(45) NOT NULL,
  number_of_teams INT(10) UNSIGNED NOT NULL,
  number_of_rows INT(10) UNSIGNED NOT NULL,
  PRIMARY KEY (tournament_ID)
)
ENGINE = INNODB,
AUTO_INCREMENT = 20,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create index `sport_fk_idx` on table `tournament`
--
ALTER TABLE tournament 
  ADD INDEX sport_fk_idx(sport);

--
-- Create foreign key
--
ALTER TABLE tournament 
  ADD CONSTRAINT sport_fk FOREIGN KEY (sport)
    REFERENCES sport(sport_ID);

--
-- Create table `team`
--
CREATE TABLE team (
  team_ID INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  sport INT(10) UNSIGNED NOT NULL,
  name VARCHAR(50) NOT NULL,
  location VARCHAR(50) NOT NULL,
  points INT(10) UNSIGNED NOT NULL DEFAULT 0,
  PRIMARY KEY (team_ID)
)
ENGINE = INNODB,
AUTO_INCREMENT = 11,
AVG_ROW_LENGTH = 3276,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create index `FK_team_sport_idx` on table `team`
--
ALTER TABLE team 
  ADD INDEX FK_team_sport_idx(sport);

--
-- Create foreign key
--
ALTER TABLE team 
  ADD CONSTRAINT team_sport_fk FOREIGN KEY (sport)
    REFERENCES sport(sport_ID) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create table `tournament_team`
--
CREATE TABLE tournament_team (
  tournament INT(10) UNSIGNED NOT NULL,
  team INT(10) UNSIGNED NOT NULL
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 2048,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create index `team_fk_idx` on table `tournament_team`
--
ALTER TABLE tournament_team 
  ADD INDEX team_fk_idx(team);

--
-- Create foreign key
--
ALTER TABLE tournament_team 
  ADD CONSTRAINT team_fk FOREIGN KEY (team)
    REFERENCES team(team_ID);

--
-- Create table `player`
--
CREATE TABLE player (
  player_ID INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  sport INT(10) UNSIGNED NOT NULL,
  name VARCHAR(50) NOT NULL,
  number INT(11) UNSIGNED NOT NULL,
  `position` VARCHAR(45) NOT NULL,
  nationality VARCHAR(45) NOT NULL,
  team INT(11) UNSIGNED NOT NULL,
  goals INT(10) UNSIGNED NOT NULL DEFAULT 0,
  assists INT(10) UNSIGNED NOT NULL DEFAULT 0,
  yellow_cards INT(10) UNSIGNED NOT NULL DEFAULT 0,
  red_cards INT(10) UNSIGNED NOT NULL DEFAULT 0,
  points INT(10) UNSIGNED NOT NULL DEFAULT 0,
  removals INT(10) UNSIGNED NOT NULL DEFAULT 0,
  PRIMARY KEY (player_ID)
)
ENGINE = INNODB,
AUTO_INCREMENT = 14,
AVG_ROW_LENGTH = 1365,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create index `player_sport_fk_idx` on table `player`
--
ALTER TABLE player 
  ADD INDEX player_sport_fk_idx(sport);

--
-- Create index `player_team_fk_idx` on table `player`
--
ALTER TABLE player 
  ADD INDEX player_team_fk_idx(team);

--
-- Create foreign key
--
ALTER TABLE player 
  ADD CONSTRAINT player_sport_fk FOREIGN KEY (sport)
    REFERENCES sport(sport_ID) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create foreign key
--
ALTER TABLE player 
  ADD CONSTRAINT player_team_fk FOREIGN KEY (team)
    REFERENCES team(team_ID) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create table `game`
--
CREATE TABLE game (
  game_ID INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  tournament INT(10) UNSIGNED NOT NULL,
  date VARCHAR(45) NOT NULL,
  home_team INT(10) UNSIGNED NOT NULL,
  guest_team INT(10) UNSIGNED NOT NULL,
  home_team_score INT(10) UNSIGNED NOT NULL DEFAULT 0,
  guest_team_score INT(10) UNSIGNED NOT NULL DEFAULT 0,
  played TINYINT(4) NOT NULL DEFAULT 0,
  PRIMARY KEY (game_ID)
)
ENGINE = INNODB,
AUTO_INCREMENT = 116,
AVG_ROW_LENGTH = 1638,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create index `game_guest_team_fk_idx` on table `game`
--
ALTER TABLE game 
  ADD INDEX game_guest_team_fk_idx(guest_team);

--
-- Create index `game_home_team_fk_idx` on table `game`
--
ALTER TABLE game 
  ADD INDEX game_home_team_fk_idx(home_team);

--
-- Create index `game_tournament_fk_idx` on table `game`
--
ALTER TABLE game 
  ADD INDEX game_tournament_fk_idx(tournament);

--
-- Create foreign key
--
ALTER TABLE game 
  ADD CONSTRAINT game_guest_team_fk FOREIGN KEY (guest_team)
    REFERENCES team(team_ID) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create foreign key
--
ALTER TABLE game 
  ADD CONSTRAINT game_home_team_fk FOREIGN KEY (home_team)
    REFERENCES team(team_ID) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create foreign key
--
ALTER TABLE game 
  ADD CONSTRAINT game_tournament_fk FOREIGN KEY (tournament)
    REFERENCES tournament(tournament_ID);

--
-- Create table `event`
--
CREATE TABLE event (
  game INT(10) UNSIGNED NOT NULL,
  minute INT(10) UNSIGNED NOT NULL,
  type VARCHAR(45) NOT NULL,
  player INT(10) UNSIGNED NOT NULL,
  assistant INT(10) UNSIGNED DEFAULT NULL
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 1024,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create index `event_assistant_fk_idx` on table `event`
--
ALTER TABLE event 
  ADD INDEX event_assistant_fk_idx(assistant);

--
-- Create index `event_game_fk_idx` on table `event`
--
ALTER TABLE event 
  ADD INDEX event_game_fk_idx(game);

--
-- Create index `event_player_fk_idx` on table `event`
--
ALTER TABLE event 
  ADD INDEX event_player_fk_idx(player);

--
-- Create foreign key
--
ALTER TABLE event 
  ADD CONSTRAINT event_assistant_fk FOREIGN KEY (assistant)
    REFERENCES player(player_ID) ON DELETE SET NULL ON UPDATE CASCADE;

--
-- Create foreign key
--
ALTER TABLE event 
  ADD CONSTRAINT event_game_fk FOREIGN KEY (game)
    REFERENCES game(game_ID) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create foreign key
--
ALTER TABLE event 
  ADD CONSTRAINT event_player_fk FOREIGN KEY (player)
    REFERENCES player(player_ID) ON DELETE CASCADE ON UPDATE CASCADE;

-- 
-- Dumping data for table sport
--
INSERT INTO sport VALUES
(1, 'Football'),
(2, 'Basketball');

-- 
-- Dumping data for table tournament
--
INSERT INTO tournament VALUES
(18, 2, 'NBA Round 1', 2, 2),
(19, 2, 'NBA Round 2', 2, 2),
(20, 1, 'English AB Cup', 4, 1);

-- 
-- Dumping data for table team
--
INSERT INTO team VALUES
(3, 1, 'Arsenal', 'London', 6),
(4, 1, 'Aston Villa', 'Birmingham', 1),
(5, 1, 'Bournemouth', 'Bournemouth', 0),
(8, 2, 'Boston Celtics', 'Boston', 0),
(9, 2, 'Brooklyn Nets', 'Brooklyn', 0),
(10, 2, 'New York Knicks', 'New York', 0),
(11, 1, 'Brighton', 'Brighton', 4);

-- 
-- Dumping data for table player
--
INSERT INTO player VALUES
(1, 1, 'Bernd Leno', 1, 'Goalkeeper', 'Germany', 3, 0, 2, 0, 0, 0, 0),
(2, 1, 'Matteo Guendouzi', 29, 'Defensive Midfielder', 'France', 3, 4, 0, 1, 0, 0, 0),
(3, 1, 'Tom Heaton', 1, 'Goalkeeper', 'England', 4, 1, 0, 0, 0, 0, 0),
(4, 1, 'Ørjan Nyland', 25, 'Goalkeeper', 'Norway', 4, 1, 0, 0, 0, 0, 0),
(5, 1, 'Aaron Ramsdale', 12, 'Goalkeeper', 'England', 5, 1, 0, 1, 0, 0, 0),
(6, 1, 'Diego Rico', 21, 'Defender', 'Spain', 5, 0, 1, 1, 0, 0, 0),
(7, 2, 'Jayson Tatum', 0, 'FG', 'USA', 8, 0, 0, 0, 0, 0, 0),
(8, 2, 'Carsen Edwards', 4, 'G', 'USA', 8, 0, 0, 0, 0, 0, 0),
(9, 2, 'Theo Pinson', 1, 'GF', 'USA', 9, 0, 0, 0, 0, 0, 0),
(10, 2, 'David Nwaba', 0, 'GF', 'USA', 9, 0, 0, 0, 0, 0, 0),
(11, 2, 'Kadeem Allen', 0, 'G', 'USA', 10, 0, 0, 0, 0, 0, 0),
(12, 2, 'Bobby Portis', 1, 'F', 'USA', 10, 0, 0, 0, 0, 0, 0),
(13, 1, 'Glenn Murray', 17, 'Forward', 'England', 11, 3, 1, 1, 1, 0, 0),
(14, 1, 'Davy Pröpper', 24, 'Midfielder', 'Netherlands', 11, 1, 1, 0, 1, 0, 0);

-- 
-- Dumping data for table game
--
INSERT INTO game VALUES
(104, 18, '13.12.2019 0:38:47', 8, 9, 0, 0, 0),
(105, 18, '01.01.0001 0:00:00', 9, 8, 0, 0, 0),
(106, 19, '01.01.2020 0:41:42', 9, 10, 0, 0, 0),
(107, 19, '01.01.0001 0:00:00', 10, 9, 0, 0, 0),
(111, 20, '13.12.2019 1:48:42', 3, 5, 0, 0, 0),
(112, 20, '17.12.2019 1:48:42', 3, 4, 2, 1, 1),
(113, 20, '22.12.2019 1:48:42', 3, 11, 2, 1, 1),
(114, 20, '27.11.2019 1:48:42', 5, 4, 0, 0, 0),
(115, 20, '29.11.2019 1:48:42', 5, 11, 1, 2, 1),
(116, 20, '01.01.0001 0:00:00', 4, 11, 1, 1, 1);

-- 
-- Dumping data for table tournament_team
--
INSERT INTO tournament_team VALUES
(18, 8),
(18, 9),
(19, 9),
(19, 10),
(20, 3),
(20, 5),
(20, 4),
(20, 11);

-- 
-- Dumping data for table event
--
INSERT INTO event VALUES
(113, 4, 'Goal', 2, 1),
(113, 34, 'Goal', 2, NULL),
(113, 40, 'Red_card', 14, NULL),
(113, 90, 'Goal', 13, NULL),
(115, 8, 'Yellow_card', 6, NULL),
(115, 40, 'Yellow_card', 5, NULL),
(115, 46, 'Goal', 5, 6),
(115, 76, 'Goal', 14, 13),
(115, 89, 'Yellow_card', 13, NULL),
(115, 90, 'Goal', 13, 14),
(116, 34, 'Goal', 4, NULL),
(116, 48, 'Goal', 13, NULL),
(116, 67, 'Red_card', 13, NULL),
(112, 35, 'Goal', 2, 1),
(112, 57, 'Yellow_card', 2, NULL),
(112, 58, 'Goal', 3, NULL),
(112, 56, 'Goal', 2, NULL);

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;